[TOC]

一个程序从源码到被执行,当中经历了3个过程：

* **编译**：将`.c`文件编译成`.o`文件，不关心`.o`文件之间的联系；
* **静态链接**：将所有`.o`文件合并成一个`.so`或`.out`文件，处理所有`.o`文件节区在目标文件中的布局；
* **动态链接**：将`.so`或`a.out`文件加载到内存，处理加载文件在内存中的布局.

## 1 什么是重定位

**重定位**就是把程序的逻辑地址空间变换成内存中的实际物理地址空间的过程。它是实现多道程序在内存中同时运行的基础。重定位有两种，分别是**动态重定位**与**静态重定位**。

1. **静态重定位**：即在程序装入内存的过程中完成，是指在程序开始运行前，程序中的各个地址有关的项均已完成重定位，地址变换通常是在装入时一次完成的，以后不再改变，故称为静态重定位。也就是在生成`可执行/共享目标文件`的同时已完成地址的静态定位,它解决了可执行文件/共享目标文件的内部矛盾.

2. **动态重定位**：它不是在程序装入内存时完成的，而是CPU每次访问内存时 由动态地址变换机构（硬件）自动进行把相对地址转换为绝对地址。动态重定位需要软件和硬件相互配合完成。也就是说`可执行文件/共享目标文件`的外部矛盾需要外部环境解决，它向外提供了一份入住地球村的外交说明，即本篇最后部分内容。
