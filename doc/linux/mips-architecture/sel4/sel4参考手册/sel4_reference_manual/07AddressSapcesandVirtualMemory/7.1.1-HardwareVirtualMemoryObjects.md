## 第7.1节  对象

### 7.1.1  硬件虚拟内存对象

每个体系结构都有一个顶级分页结构(级别0)和一些中间层级。顶级分页结构直接对应于seL4中VSpace的顶级结构概念。对于每一个架构，VSpace被实现为不同的对象，这由架构细节决定。

通常，每一层级的每个分页结构都包含可以映射下一级分页结构或特定大小内存页帧的项目。如果上一级结构没有映射，本级的映射操作将失败。开发者需要手动创建和映射所有的分页结构。每个层级的结构大小和类型，以及解析该层级的虚拟地址位数由硬件决定。

seL4提供了在这些硬件分页结构上操作的方法，包括映射和缓存操作。映射操作需要引用能力，例如，要将一个层级为1的分页结构映射到一个特定的虚拟地址，要引用相应对象的能力，同时要传递顶层结构参数。

通常，顶级结构没有映射调用[^1]，而是用作其他几个与虚拟内存相关的对象调用参数。对于某些架构，可以引用顶级页表进行缓存操作。通过对页目录以及页帧能力进行缓存相关的操作调用，API允许用户使用更灵活的策略选项。例如，一个代表页目录的操作，可以对页目录能力所涵盖的所有页帧执行缓存操作，而无需直接访问这些页帧能力。

本节的其余部分将详细介绍每种架构的分页结构。

[^1]: 顶级页表通过先UntypedRetype，再ASIDPoolAssign的方式创建。
