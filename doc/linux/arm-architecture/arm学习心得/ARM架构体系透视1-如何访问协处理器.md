[TOC]

## 1 协处理器的作用

协处理器用于执行特定的处理任务，如数学协处理器可以执行控制数字处理，以减轻处理器的负担。ARM处理器最多可以支持16个协处理器，其中`CP15`是最重要的一个协处理器。

## 2 CP15的作用

`CP15`是系统控制协处理器，通过特殊的寄存器可以控制`cache`，`MMU`，`FPU`和`系统时钟`等功能。

## 3 访问协处理器

1. CP15有16组寄存器，通过`mcr`和`mrc`指令来访问协处理器里的寄存器，从而达到访问协处理器的目的。

2. 通过数据手册中的CP15寄存器映射概述，可以查到相关的寄存器功能和访问方法。

3. 格式

    ```asm
    mcr{cond} p15, <op1>, <rd>, <crn>, <crm>, <op2>
    mrc{cond} p15, <op1>, <rd>, <crn>, <crm>, <op2>
    ```
    说明：

    * mcr: 保存，保存寄存器`rd`的值到CP15寄存器`crn`中
    * mrc: 装载，把CP15寄存器crn的值装载到ARM寄存器rd中
    * p15: 协处理器CP15
    * <rd\>: 目的寄存器
    * <crn\><op1\>: 用于提供在CP15内要访问的寄存器和要执行的操作
    * <crm\><op2\>: 用于提供可能的补充控制。可以数据手册中找具体值

## 4 示例

