<h1 id="0">0 目录</h1>

* [1 范围](#1)
* [2 参考规范](#2)
* [3 术语、定义、缩略语](#3)
    - 略
* [4 背景](#4)
    - [4.1 动机](#4.1)
    - [4.2 EDDL](#4.2)
    - [4.3 FDT](#4.3)
    - [4.4 OPC-UA](#4.4)
* [5 架构](#5)
    - [5.1 综述](#5.1)
    - [5.2 FDI包](#5.2)
    - [5.3 FDI客户端](#5.3)
    - [5.4 FDI服务器](#5.4)
    - [5.5 FDI通信服务器](#5.5)
    - [5.6 用户接口分层](#5.6)
    - [5.7 FDI安全考虑](#5.7)
    - [5.8 冗余](#5.8)
* [6 部署](#6)
    - [6.1 综述](#6.1)
    - [6.2 工程站、操作台和维护台](#6.2)
    - [6.3 FDI服务器](#6.3)
    - [6.4 FDI通信服务器](#6.4)
    - [6.5 设备工具](#6.5)
    - [6.6 第三方工具](#6.6)
    - [6.7 手持工具](#6.7)
    - [6.8 通用OPC-UA客户端](#6.8)
* [7 FDI主机](#7)
    - [7.1 综述](#7.1)
    - [7.2 FDI主机变体和实体](#7.2)
    - [7.3 FDI主机可选功能](#7.3)
* [8 生命周期模型](#8)
    - [8.1 综述](#8.1)
    - [8.2 身份验证机制](#8.2)
    - [8.3 版本管理](#8.3)
        + [8.3.1 版本划分](#8.3.1)
        + [8.3.2 FDI技术版本](#8.3.2)
        + [8.3.3 向前兼容](#8.3.3)

*** 

<h1 id="1">1 范围</h1>

本文章描述了FDI技术规范的概念和综述。[第4.1节](#4.1)描述了为什么创建这份技术，也就是动机是什么。读本文有助于理解FDI技术规范的其它部分。

<h1 id="2">2 参考规范</h1>

下面的资料是本文档或多或少引用的文章。对于注明日期的参考文献，仅适用所引用的版本；对于未注明日期的参考文献，引用其最新版本（包括任何修订）。

* FCG TS61804-3, 功能块（FB）的过程控制和EDDL-第3部分：EDDL语法和语义。
* FCG TS61804-4, 功能块（FB）的过程控制和EDDL-第4部分：EDD的解释。
* FCG TS61804-5, 功能块（FB）的过程控制和EDDL-第4部分：EDDL内置库。
* IEC 62453 (所有部分), 设备设备工具（FDT）接口规范。
* IEC 62541 (所有部分), OPC统一架构
* IEC TR 62541-1, OPC统一架构–第1部分：综述和概念。
* IEC 62541-3, OPC统一架构–第3部分：地址空间模型。
* IEC 62541-4, OPC统一架构–第4部分：服务。
* IEC 62541-5, OPC统一架构–第4部分：信息模型。
* IEC 62541-100, OPC统一架构–第100部分：设备接口。
* FCG TS62769-2, FDI规范-第2部分：FDI客户端。
* FCG TS62769-3, FDI规范-第3部分：FDI服务器。
* FCG TS62769-4, FDI规范-第4部分：FDI包。
* FCG TS62769-5, FDI规范-第5部分：FDI信息模型。
* FCG TS62769-6, FDI规范-第6部分：FDI技术映射。
* FCG TS62769-7, FDI规范-第7部分：通信服务。
* ISO/IEC 11578, 信息技术–开放系统互连–远程过程调用（RPC）。

<h1 id="3">3 术语、定义、缩略语</h1>

略。

<h1 id="4">4 背景</h1>

<h2 id="4.1">4.1 动机</h2>

在当今的自动化系统领域，来自许多不同供应商的设备必须集成到系统中，这导致了对这些设备的安装、版本管理和操作的额外工作。这一挑战最好通过开放和标准化的设备集成解决方案来解决。

目前，2种不同的设备集成技术共存：遵循IEC-61804的EDDL和遵循IEC-62453的FDT。这些技术采用不同的方案解决问题，但它们之间有许多重合的地方。这导致了两种技术相互竞争而不是互相补充。结果，系统提供商提供了这些方案，设备供应商不得不付出两倍的努力去支持EDDL和FDT，而终端用户想要使用这两种技术而感到沮丧。

对于所有相关方来说，理想的解决方案是不同的。系统提供商希望实现健壮性，同时确保高水平的技术和平台独立性。设备供应商希望支持一种技术，而不是两种，以减少成本和投入，提供最佳的操作设备的方法。用户想要避免错误的投资，因此想要一个面向未来的，具有所有竞争技术优势的方案。

<h2 id="4.2">4.2 EDDL</h2>

EDDL是一种描述现场设备的语言。它使系统能够配置、校准、故障诊断和操作设备，而无需事先了解设备。

使用EDDL写的设备描述，描述了现场设备的能力；由系统决定如何利用这些功能。这些设备描述使系统能够访问所有设备的数据和属性，这样，简化了设备的维护、支持和操作。同时支持手持设备应用和大型集成自动化系统。另外，对于嵌入式系统和运行在商业操作系统上的系统都能很好的支持。

使用EDDL，设备提供商可以组织设备的数据、属性和用户访问的过程。这为动态创建用户界面提供了系统指导。对于不同类型的设备，这个用户界面功能可能很不同，可简单，也可复杂。

在20世纪90年代早期，EDDL的第一个版本被创建出来，并被用来描述HART field设备。在1996年，EDDL被用来描述基金会现场总线设备。然后在2000年，它被用来描述PROFIBUS设备。所有三个版本的EDDL都可以追溯到原始的HART版本。因此，这三个版本在很大程度上是相同的，但是由于底层通信协议的不同而存在一些差异。2004年3月，EDDL作为IEC 61804-3和IEC 61804-4的一部分首次标准化。

<h2 id="4.3">4.3 FDT</h2>

FDT®是一个接口规范，规范了设备软件和系统之间的接口。它独立于通信协议，并在设备供应商提供的软件和系统供应商提供的软件之间建立明确的界限。

在FDT规范中，现场设备由设备特定的软件组件(称为设备类型管理器-DTM)提供，该组件仅在与基于FDT的框架应用程序（比如，YOKOGAWA公司的FieldMate）结合使用时才有用。框架应用程序通过一组标准FDT接口与DTM交互。

设备供应商可以为每一个设备开发一个DTM，也可以为一组设备开发一个DTM。使用DTM可以访问设备参数、配置和操作设备和诊断设备。DTM可以是用于设置设备参数的简单图形用户界面(GUI)，也可以是用于执行复杂计算进行诊断的非常复杂的应用程序。

为了支持模块化设备，可以嵌套DTM。DTM的嵌套还允许多级通信层次结构。通过不同总线协议路由的设备可以通过标准接口连接。一个设备DTM仅必须支持它自己的通信协议。连接到设备DTM的网关DTM处理协议转换。

FDT®规范支持多种总线协议，例如:PROFIBUS、HART、基金会现场总线、Interbus、AS-interface、IO- link、DeviceNet和PROFINET IO。

<h2 id="4.4">4.4 OPC-UA</h2>

OPC-UA是一种与平台无关的标准，通过它，各种系统和设备可以通过各种类型的网络，在客户端和服务器之间发送消息。它支持健壮、安全的通信，保证客户端和服务器的身份识别和抵抗攻击。

OPC-UA定义了服务器可以提供的标准服务，各个服务器向客户端指定他们支持哪些服务。服务作用于对象模型，该对象模型由服务器管理，客户端查找。信息使用标准和供应商定义的数据类型来传递，服务器定义客户端可以动态发现的对象模型。服务器可以提供对当前和历史数据、警报和事件的访问。

OPC-UA可以映射到各种通信协议，数据可以以各种方式编码，以权衡可移植性和效率。基于XML的Web服务的传输和编码以及高性能的二进制文件都是为OPC-UA定义的。从任何特定技术中抽象出的OPC-UA标准提供了对未来的保证，允许OPC-UA映射到未来的技术中。

系统集成包括如何集成和集成什么。OPC-UA通过提供全面的服务，实现如何集成。OPC-UA还通过定义一个可扩展对象模型，实现系统集成的基本构件。其它标准组织，供应商和用户可以扩展这个对象模型，以实现系统组件之间紧密集成。

OPC-UA的标准是IEC 62541。

<h1 id="5">5 架构</h1>

<h2 id="5.1">5.1 综述</h2>

FDI架构由3部分组成：FDI包、FDI客户端、FDI服务器，如下图所示：

<img id="Pic_1" src="https://raw.githubusercontent.com/tupelo-shen/my_test/master/doc/Industrial_field_bus/FDI/images/FDI_PART1_1_1.PNG">

图1-1 FDI架构框图

<h2 id="5.2">5.2 FDI包</h2>

FDI包是设备供应商向系统供应商提供设备信息的手段。FDI包收集了系统供应商所需要的所有设备信息。FDI包与系统无关，例如，设备供应商向所有的系统供应商提供同一个FDI包。

一个FDI包包含：

1. 设备定义 – FDI服务器用于创建信息模型的设备核心定义。
2. 业务逻辑 – 确保信息模型的完整性
3. 用户接口描述 – 由FDI客户端通过UID解释器呈现的描述性用户接口。
4. 用户接口插件 – 由FDI客户端托管的可选编程用户接口。

设备定义和业务逻辑仅由FDI服务器使用。用户接口描述（UID）由FDI服务器处理，然后传送给FDI客户端。用户接口插件（UIP），FDI服务器不处理，只是将其必要的信息传递给FDI客户端。

设备定义、业务逻辑和用户接口描述是完全独立于平台的。用户接口插件（UIP）跟平台的实时运行环境有关，应该为不同的实时运行环境开发不同的用户接口插件，也就是说，一个用户接口插件只能运行在某一个实时运行环境里。

关于FDI包的内容，请参考《FCG TS62769-4》。

<h2 id="5.3">5.3 FDI客户端</h2>

FDI客户端负责解释并呈现可描述性的用户接口内容（UID，设备参数等），这些内容是通过FDI服务器的特定格式的信息模型和定义的服务传递过来的。FDI包的EDD部分仅由FDI服务器解释的。另外，FDI客户端还要托管用户接口插件（UIP）。

托管用户接口插件的环境由4部分服务组成：托管服务，UIP服务，用户接口服务和设备访问服务。

* **托管服务**提供UIP与FDI客户端交互的方法。
* **UIP服务**提供FDI客户端激活、控制和关闭UIP的方法。
* **用户接口服务**提供UIP访问操作系统特定的平台UI服务的方法，这些服务包括访问屏幕、键盘、鼠标等。
* **设备访问服务**提供UIP访问FDI服务器中的信息模型的方法。

关于FDI客户端的内容，请参考《FCG TS62769-2》。

<h2 id="5.4">5.4 FDI服务器</h2>

FDI服务器提供FDI客户端访问的信息，包括设备实例和设备类型，不管其是存储在设备本身还是数据库中。这些信息都由OPC-UA服务提供。

信息模型指定了可以在FDI服务器中访问的实体，包括它们的属性、它们的关系和可以对它们执行的操作。信息模型主要由FDI包中的设备定义驱动。信息模型基于OPC-UA中指定的信息模型。

当信息模型中的实体被访问的时候，FDI服务器会调用FDI包中的业务逻辑（BL）。业务逻辑的目的之一就是保持信息模型的一致性。比如，当某个属性的值发生变化时，其单位也应该发生变化。

业务逻辑接口提供业务逻辑集成到信息模型中的方法。这些接口包括，一组定义好的业务逻辑入口点，信息模型用其调用业务逻辑；还有一组定义好的信息模型入口点，业务逻辑用其访问信息模型。

FDI服务器应该支持FDI包中所有元素。

FDI管理的某些信息应该是永久保存的，具体保存方法由服务器端决定。

关于FDI服务器的内容，请参考《FCG TS62769-3》，关于信息模型的内容，请参考《FCG TS62769-5》。

<h2 id="5.5">5.5 FDI通信服务器</h2>

FDI服务器通过自己支持的硬件（及其软件）与设备通信。此外，FDI通信服务器提供了扩展FDI服务器可以通信的设备。FDI服务器和FDI通信服务器之间的通信是通过《FCG TS62769-7》中指定的标准通信服务实现的。

<h2 id="5.6">5.6 用户接口分层</h2>

使用FDI需要开发3层用户接口。

1. 最底层是基于用户接口的用户接口描述（UID）。是创建用户接口最简单的方法，但是限制也是最多的。一般用于相对简单的设备。

2. 第2层是用户接口插件（UIP）。这类用户接口是通过UID和一个或多个UIP组合而成的。这是更为复杂的用户接口，因为它涉及软件开发，但是也产生了复杂的用户接口。这类接口主要用于相对复杂的设备。

3. 第3层是FDI客户端。FDI客户端可以访问多个设备，而UID和UIP仅能访问单个设备。这类接口主要用于访问多个设备的时候。

<h2 id="5.7">5.7 FDI安全考虑</h2>

FDI被用于工业设施运营的多个层次的组件之间:从访问设备数据的高级企业管理应用程序（比如ERP系统）到设备的直接过程控制。这样的系统可能是工业间谍的目标，也可能遭到非恶意软件的威胁，如公共网络上的蠕虫病毒。损坏设备可能导致经济损失，影响员工和公共安全，或造成环境损害。

FDI依赖于工业设施内的许多其它系统。它们之间的标准通信协议，比如OPC-UA和现场总线协议，可能会遭到破坏。FDI客户端和服务器属于IT系统的一部分，因此，FDI的安全应该在整体的网络安全管理系统（CSMS）内进行考虑。CSMS通常负责处理威胁、分析安全风险并决定采用什么安全控制。

安全控制通常实行`深度防御`的策略，提供多层防护，必须意识到没有单一层面的防护能够抵抗所有的攻击。隔离保护可能包括防火墙、入侵检测和防护系统，对拨号连接的控制以及对进入系统的多媒体和计算机的控制。对于系统组件的防护可能包括操作系统的强化配置、安全补丁管理、反病毒程序以及不允许邮件进入控制网络中等。具体的实施标准需要遵守《IEC 62443》系列和《IEC TR 62351-10》。

安装FDI客户端和服务器的系统管理者应该分析安全风险并提供适当的机制来降低这些风险，达到可靠的安全水平。

FDI客户和服务器的开发者应该分析系统面临的安全威胁，并采取相应的对策。威胁和适当的对策取决于实施的技术，不属于FDI规范的范围。

<h2 id="5.8">5.8 冗余</h2>

冗余是特定于系统的，由自动化系统管理。FDI包不考虑冗余。用户接口描述和用户接口插件不知道与它们相关联的设备的冗余信息。

<h1 id="6">6 部署</h1>

<h2 id="6.1">6.1 综述</h2>

FDI规范并没有强制特定的部署策略。但是，一个典型的应用场景，如下图所示。带有阴影的方框分别是5.2、5.3、5.4、5.5描述的组件。

<img id="Pic_1" src="https://raw.githubusercontent.com/tupelo-shen/my_test/master/doc/Industrial_field_bus/FDI/images/FDI_PART1_1_1.PNG">

图1-2 典型的部署场景

名称解释：

1. MES - 制造生产执行系统
2. CMMS - 计算机维护管理系统
3. ERP - 企业资源计划系统

<h2 id="6.2">6.2 工程站、操作台和维护台</h2>

工程站、操作台和维护台是自动化系统的一部分，通过它们，用户工程师操作和控制他们的工厂。这些工作站可以运行一个或多个FDI客户端。这些客户端一般都是完整的，可以解释并呈现用户接口描述（UID），也可以执行用户接口插件（UIP）。

<h2 id="6.3">6.3 FDI服务器</h2>

FDI服务器作为自动化系统的一部分，FDI包安装在上面。FDI服务器负责把FDI包中的信息呈现给FDI客户端。

作为自动化系统提供商，需要提供FDI服务器和一个或多个FDI客户端。这些客户端能够通过所有的协议与FDI服务器通信；但是，如果FDI服务器支持第三方的客户端，那么它应该支持OPC-UA。

通常情况下，FDI服务器与运行在工程站、操作台和维护台上的提供实时数据的服务器不同。

<h2 id="6.4">6.4 FDI通信服务器</h2>

FDI通信服务器可以嵌入到通信设备中，也可以作为一个独立的服务器存在，如图2所示。

<h2 id="6.5">6.5 设备工具</h2>

设备工具是一个独立的应用程序，包含FDI客户端和FDI服务器。需要一起安装FDI包。

<h2 id="6.6">6.6 第三方工具</h2>

第三方工具是包含FDI客户端并能够和自动化系统中的FDI服务器通信的应用程序。由系统之外的供应商提供。

<h2 id="6.7">6.7 手持工具</h2>

手持工具就是运行在手持设备的应用程序。它和设备工具的概念类似。也可以作为第三方工具，不过只有FDI客户端。

<h2 id="6.8">6.8 通用OPC-UA客户端</h2>

FDI服务器是OPC-UA服务器时，通用的OPC-UA客户端在不知FDI的情况下也可以连接到FDI服务器。这些客户端仅限于对信息模型的一般访问。尤其是，由于缺乏对UID和UIP的理解，阻止其呈现对基于FDI的用户接口。

<h1 id="7">7 FDI主机</h1>

<h2 id="7.1">7.1 综述</h2>

FDI主机是指FDI客户端和FDI服务器应用程序的组合，能够解析FDI包。FDI主机能够通过用户接口或者直接访问设备数据（通常是现场设备和通信设备参数），并能够修改设备数据。FDI主机应该接受FDI主机一致性测试。

FDI主机的结构有几种可能性。7.2和7.3列出了不同的变体、实体和所谓的可选功能。

<h2 id="7.2">7.2 FDI主机变体和实体</h2>

有不同的方式实现和构建一个FDI主机：

* FDI主机（单用户）
    
    部署到单个设备上（比如笔记本电脑、移动计算机）。一次只能一个用户使用主机。典型的例子就是设备工具，独立设备管理程序和手持设备。

* FDI主机（多用户）
    
    可以安装在一个设备上，也可以是多个设备（C/S架构）。一次允许多个用户使用FDI主机。通常对这样的主机可以并发访问设备数据和使用用户接口。典型的例子是分布式主机系统和资产管理系统。

* FDI客户端(OPC UA)
    
    FDI客户端应用程序通常和DCS（分布式控制系统）是独立提供的，甚至是不同供应商提供的。这样的FDI客户端应用程序要求FDI主机支持FDI信息模型功能（见7.3），而且是多用户FDI主机一起使用。

* FDI通信服务器
    
    通信服务器应用程序被用来连接通信硬件到通信网络中（作为所谓的网络入口点）。FDI通信服务器通过FDI通信包集成，但是软件本身可以是独立的，或嵌入到通信设备硬件中。FDI通信服务器要求FDI主机支持FDI通信服务器的功能。

<h2 id="7.3">7.3 FDI主机的可选功能</h2>

一些可选的功能可以被添加到FDI主机实现中，以扩展主机额外的能力（见表1和表2）。

* FDI信息模型 

    实现这方面功能的FDI主机需要按照《FCG TS62769-5》实现FDI信息模型，并能够支持OPC-UA作为FDI服务器和客户端的通信机制。所以，此主机允许使用FDI客户端（OPC-UA）应用程序。

* FDI通信服务器

    这方面的能力允许FDI主机使用FDI通信服务器。根据《FCG TS62769-7》和《FCG TS62769-4》规范的要求，通信设备可以通过FDI通信包集成到FDI主机中，从而访问网络。

<h1 id="8">8 生命周期模型</h1>

<h2 id="8.1">8.1 综述</h2>

FDI生命周期模型定义了不同版本的FDI客户端、FDI服务器、FDI包和设备如何随时间在给定的系统中共存。这个模型侧重于在不更新FDI客户端或FDI服务器端的情况下向系统添加FDI包的能力。该模型还支持设备的生命周期模型，包括系统中设备的添加、升级和替换。

生命周期模型基于下面的原则：

1. 每个FDI客户端、服务器和FDI包都应该有一个FDI版本号。此版本号应为客户端、服务器或包构建时所依据的FDI规范的版本。在给定系统中，所有的客户端、服务器、和包的主要修订版本应该是一样的。
2. 如果任何被FDI规范引用的其它规范发生改变，那么FDI规范也应该产生修订版本。
3. 基础技术的版本应该独立于FDI版本。
4. 可以查询由特定FDI客户端、FDI服务器或FDI包支持的FDI版本。
5. 可以查询由特定FDI客户端、FDI服务器或FDI包支持的FDI版本。版本查询可用于确定FDI客户端、FDI服务器或FDI包之间的互操作性和兼容性。
6. 将FDI包与物理设备关联的算法是特定于协议的。

<h2 id="8.2">8.2 身份验证机制</h2>

通用唯一识别码（UUID）应该被用来唯一地识别FDI中的实体，请查看《ISO/IEC 11578》规范。

UUID是一个16字节的数字，每一个字节用2个16进制的数字组成，使用连字符`-`分为5组，格式如下：

    xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.

下面的正则表达式更精确地指定了UUID的格式:

    ^(\{{0,1}[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\}{0,1})$

<h2 id="8.3">8.3 版本管理</h2>

<h3 id="8.3.1">8.3.1 版本划分</h3>

<h4 id="8.3.1.1">8.3.1.1 综述</h4>

版本号的格式：

    <major release>.<minor release>.<revision>-<build number>

8.3.1.2到8.3.1.5指定了处理不同版本时的标准行为。例如，在受管制的行业要求不同的处理。

<h4 id="8.3.1.2">8.3.1.2 主版本号</h4>

用以标识发生了与以前的主要版本不兼容的重大改变。这种改变可能是技术推动的，比如，接口不兼容变更。也可能是战略推动的，比如引入了新一代的现有元素。

一个主要版本和同一实体的其它版本共存。主版本号的增加要求受影响的实体的UUID也改变。

<h4 id="8.3.1.3">8.3.1.3 次版本号</h4>

通过添加特性或者功能，可以实现完全向后兼容的功能扩展。也就是说，在现有环境中使用更新的实体不需要采取任何操作。实体与已经部署的实体完全互操作，而这些已经部署的实体次版本号可能更低。

版本升级时，次版本号会覆盖先前已经部署实体的版本。但是，次版本号不会影响UUID。

> <font color="blue">在这儿，实体可能指FDI服务器、客户端、FDI包</font>

<h4 id="8.3.1.4">8.3.1.4 修订版本</h4>

修订版本用来描述修正或者编辑更改，这些操作是完全向后兼容的。也就是说，在现有环境中使用更新后的实体，不用做任何操作。实体与已经部署的实体完全互操作，而这些已经部署的实体次版本号可能更低。

版本升级时，修订版本号会覆盖先前已经部署实体的版本。但是，修订版本号不会影响UUID。

<h4 id="8.3.1.5">8.3.1.5 构建号</h4>

构建号不应向最终用户公开，仅可用于内部开发目的。

> <font color="blue">《版本划分》这一节，核心内容就是，主版本号比较有用，代表发生了结构上的重大改变，需要更新UUID；而次版本号和修订版本号主要用于区分更改操作，但是不会影响整个已有系统的使用，也不需要更新UUID</font>

<h3 id="8.3.2">8.3.2 FDI技术版本</h3>

<h4 id="8.3.2.1">8.3.2.1 通用</h4>

FDI技术本身也需要版本控制，以保证所有独立开发和提供的组件之间能够互操作。上面描述的版本机制和原则也适用于FDI技术。

FDI技术的版本直接或间接地被几个因素影响，比如接口更改/调整、行为更改/调整和底层技术的更改（引用的技术规范）。

FDI组件应该检查相连组件的FDI技术版本或者将要使用的FDI包的版本，保证必要的FDI兼容能力，能够互相操作。

举例说，FDI服务器对应特定的FDI技术版本实现后，支持所有相同或者更低版本的FDI包。将要连接到该FDI服务器的FDI客户端，则必须根据相同或者更高的FDI技术版本实现。


每一部分支持的FDI技术版本如下所示：

* FDI客户端（查阅《FCG TS62769-2》）
* FDI服务器（查阅《FCG TS62769-3》）
* FDI包（查阅《FCG TS62769-4》）
* UIP（查阅《FCG TS62769-4》）

<img id="Pic_3" src="https://raw.githubusercontent.com/tupelo-shen/my_test/master/doc/Industrial_field_bus/FDI/images/FDI_PART1_1_3.PNG">

图3 FDI技术版本依赖

图3显示了FDI技术版本的影响因素，下文将进一步描述。

<h4 id="8.3.2.2">8.3.2.2 FDI核心技术和概念</h4>

FDI的核心技术和概念被定义在本规范的所有引用部分中。必须根据此规范实现指定的接口、行为、状态机和概念，以确保FDI组件的互操作性。

对该规范文件的更改，比如修正印刷错误、重新措辞以增加文件的可读性，以及其它类似修改都会导致FDI技术的修订版本的增加。

为了改进技术或扩展特性，而对核心技术和概念的更改，是完全向后兼容的，也会导致FDI技术的次版本号的增加。

如果有需要不向后兼容的更改，创建新一代的FDI技术会增加FDI技术的主版本号。

<h4 id="8.3.2.3">8.3.2.3 技术映射</h4>

FDI组件可以使用不同的实现技术实现，也能运行在不同的平台和操作系统上。这些实现技术请参阅《FCG TS62769-6》。

对映射技术的更改不会导致FDI技术的修订版本的增加。

FDI技术版本的次版本号应该在映射技术升级时增加，同时不影响FDI组件的互操作性和正确执行，比如，完全向后兼容的操作系统变更，或者其它被支持的实现技术、平台、操作系统的引入。

映射技术如果发生不兼容的变更或不连续，FDI技术版本的主版本号会因为新一代FDI技术的产生而增加。

<h4 id="8.3.2.4">8.3.2.4 引用技术</h4>

FDI技术引用的技术维护不在FDI的范围之内。

《FCG TS62769-6》列出了引入规范的版本。使用不同的版本实现FDI组件时不被允许的。

对引用技术的更改不会导致FDI技术的修订版本的增加。

如果引用技术规范发生更变，如果这些变化是完全向后兼容的且能增加FDI的价值的话，新版本的引用规范将会被FDI采用。FDI技术版本的次版本号会因这种变更发生增加。

如果引用技术发生新一代的变化时，只有完全向后兼容才会被FDI采用。会导致FDI技术次版本号增加，但是不影响主版本号。


<img id="Pic_4" src="https://raw.githubusercontent.com/tupelo-shen/my_test/master/doc/Industrial_field_bus/FDI/images/FDI_PART1_1_4.PNG">

图4 FDI技术版本的影响总结

作为单机FDI主机安装的一部分，应同时至少支持2个连续的主要FDI技术版本（最新的和前一代FDI）。支持意味着FDI服务器和FDI客户端必须实现支持技术版本的特定细节，也能接受基于这些FDI技术显示的FDI包的导入。

<h3 id="8.3.3">8.3.3 向前兼容</h3>

<h4 id="8.3.3.1">8.3.3.1 要处理的版本组合</h4>

FDI包的设计对应特定的FDI技术版本，这个版本号可以在FDI包的FdiVersionSupported属性中看到。（参阅《FCG TS62769-6》）FDI服务器和客户端的设计也可以对应具体的FDI技术版本。

表4-指出了FDI包和FDI客户端/服务器兼容性的关系，8.3.3.2到8.3.3.6描述了每一个如何处理。<font color="blue"> 这一节的内容通俗地讲，就是FDI服务器和客户端的版本可以大于FDI包，反之不行。</font>

<img id="Pic_5" src="https://raw.githubusercontent.com/tupelo-shen/my_test/master/doc/Industrial_field_bus/FDI/images/FDI_PART1_1_5.PNG">

<h4 id="8.3.3.2">8.3.3.2 部署</h4>

如果FDI包的版本大于等于FDI服务器的版本，自动阻止这类包的机制被禁止。也就是，按照向后兼容的原则，可以安装并使用，但是应该明确告知用户更新更高版本的包。

<h4 id="8.3.3.3">8.3.3.3 信息模型创建</h4>

信息模型节点是在FDI包提供的EDD基础上创建的。如果由FDI服务器不知道的EDD结构，就会取消创建信息模型，因为无法保证FDI包能够正确地被导入，也不能保证信息模型的一致性。FDI服务器应该提供告知用户不兼容的机制。

<h4 id="8.3.3.4">8.3.3.4 业务逻辑执行</h4>

理由同[8.3.3.3 信息模型创建](#8.3.3.3)，因为业务逻辑的执行还要依赖信息模型呢。

<h4 id="8.3.3.5">8.3.3.5 用户接口描述/可视化</h4>

理由同上，用户接口描述/可视化的实现是需要FDI包的信息支持的。

<h4 id="8.3.3.6">8.3.3.6 UIP执行</h4>

UIP向前兼容的能力取决于底层技术向前兼容的能力，请查阅《FCG TS62769-6》。

<div style="text-align: right"><a href="#0">回到顶部</a><a name="_label0"></a></div>
